(()=>{"use strict";var e=document.querySelector(".places__list"),t=document.querySelector("#card-template").content,n=document.querySelector(".popup_type_image"),r=document.querySelector(".popup__image"),o=document.querySelector(".popup__caption"),c=document.querySelector(".profile__edit-button"),u=document.querySelector(".popup_type_edit"),i=document.querySelector(".profile__add-button"),p=document.querySelector(".popup_type_new-card"),a=document.querySelectorAll(".popup__close"),l=document.querySelector('form[name="edit-profile"]'),d=l.querySelector(".popup__input_type_name"),s=l.querySelector(".popup__input_type_description"),_=document.querySelector(".profile__title"),m=document.querySelector(".profile__description"),v=document.querySelector(".popup__new-card"),y=v.querySelector(".popup__input_type_card-name"),f=v.querySelector(".popup__input_type_url");function q(e){e.classList.add("popup_is-opened"),window.addEventListener("keydown",g)}function S(){document.querySelector(".popup_is-opened")&&document.querySelector(".popup_is-opened").classList.remove("popup_is-opened"),window.removeEventListener("keydown",g)}function k(e){e.target.classList.contains("popup")&&S()}function L(e){e.addEventListener("mousedown",k)}function g(e){"Escape"===e.key&&S()}function b(e){e.target.closest(".card").remove()}function E(c){var u;u=function(e,c){var u=t.querySelector(".card").cloneNode(!0),i=u.querySelector(".card__image");return i.src=e.link,i.alt=e.alt,u.querySelector(".card__title").textContent=e.name,u.querySelector(".card__delete-button").addEventListener("click",c),u.querySelector(".card__like-button").addEventListener("click",(function(e){return function(e){e.target.classList.toggle("card__like-button_is-active")}(e)})),i.addEventListener("click",(function(e){return function(e){q(n),r.setAttribute("src",e.target.src),r.setAttribute("alt",e.target.alt),o.textContent=e.target.alt}(e)})),u}(c,b),e.prepend(u)}[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg",alt:"Фотография гор Архыза"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg",alt:"Зимняя фотография незамерзшего озера из Челябинской области"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg",alt:"Фотография домов городского квартала Иваново в сумерках"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg",alt:"Фотография гор и растительности Камчатки"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg",alt:"Фотография дорожного полотна, проходящего среди леса в Холмогорском районе"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg",alt:"Фотография гор вокруг Байкала"}].forEach(E),c.addEventListener("click",(function(){q(u),s.value=m.textContent,d.value=_.textContent})),i.addEventListener("click",(function(){return q(p)})),a.forEach((function(e){e.addEventListener("click",(function(){return S()}))})),L(u),L(p),L(n),l.addEventListener("submit",(function(e){return function(e){e.preventDefault(),_.textContent=d.value.trim(),m.textContent=s.value.trim(),S()}(e)})),v.addEventListener("submit",(function(e){return function(e){e.preventDefault();var t={name:y.value,link:f.value,alt:y.value};""!==y.value.trim()&&""!==f.value.trim()&&(E(t),S(),y.value="",f.value="")}(e)}));var h=function(e,t){!function(e){return e.some((function(e){return!e.validity.valid}))}(e)?(t.disabled=!1,t.classList.remove("popup__button_inactive")):(t.disabled=!0,t.classList.add("popup__button_inactive"))};Array.from(document.querySelectorAll(".popup__form")).forEach((function(e){e.addEventListener("submit",(function(e){e.preventDefault()})),function(e){var t=Array.from(e.querySelectorAll(".popup__input")),n=e.querySelector(".popup__button");h(t,n),t.forEach((function(r){r.addEventListener("input",(function(){!function(e,t){t.validity.valid?function(e,t){var n=e.querySelector(".".concat(t.id,"-error"));t.classList.remove("popup__input_type_error"),n.classList.remove("popup__input-error_active"),n.textContent=""}(e,t):function(e,t,n){var r=e.querySelector(".".concat(t.id,"-error"));t.classList.add("popup__input_type_error"),r.textContent=n,r.classList.add("popup__input-error_active")}(e,t,t.validationMessage)}(e,r),h(t,n)}))}))}(e)}))})();